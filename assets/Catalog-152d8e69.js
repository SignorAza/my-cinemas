import{r as y,b as w,o as a,d as m,w as C,e as b,f as s,u as c,i as x,t as h,g as B,h as r,j as S,k as D,c as u,F as g,l as F,m as v}from"./index-07261a60.js";const L={alt:"",class:"main__catalog-list-item-img"},P={class:"main__catalog-list-item-title"},$={__name:"CatalogItem",props:{item:Object,type:String},setup(t){return(e,l)=>{const n=y("router-link"),o=w("lazy");return a(),m(n,{to:t.type+"/"+t.item.id,class:"main__catalog-list-item"},{default:C(()=>[b(s("img",L,null,512),[[o,c(x)+t.item.backdrop_path]]),s("h2",P,h(t.item.name||t.item.title),1)]),_:1},8,["to"])}}},j={key:0,class:"main__catalog"},z={class:"container"},H={class:"main__catalog-title"},M={class:"main__catalog-list"},V={__name:"Catalog",props:{type:String},setup(t){const e=t,l=B();let n=r(1),o=r([]),i=r(!1);const _=async()=>{if(!i.value){i.value=!0,await l.getPopular({type:e.type,page:n.value});const p=e.type=="movie"?l.popularMovies:e.type=="tv"?l.popularTvs:"";o.value.push(...p),setTimeout(()=>i.value=!1,1e3),n.value++}};S(()=>{window.onscroll=()=>{scrollY+window.innerHeight>=document.body.scrollHeight&&_()},_()});const f=D(()=>e.type=="movie"?"Все фильмы":e.type=="tv"?"Все сериалы":"");return(p,N)=>{const k=y("Loader");return a(),u(g,null,[c(o)?(a(),u("div",j,[s("div",z,[s("h2",H,h(f.value),1),s("div",M,[(a(!0),u(g,null,F(c(o),d=>(a(),m($,{key:d.id,item:d,type:t.type},null,8,["item","type"]))),128))])])])):v("",!0),c(i)?(a(),m(k,{key:1})):v("",!0)],64)}}};export{V as _};
